const server="https://www.kgbdns.com";async function login(){$("#reason").text(""),$("#reason").addClass("visually-hidden");var e=$("#username").val(),a=$("#password").val();if(e.length)if(a.length){var n=await validate_login(e,a);if(200!=n.status)return $("#reason").text(n.reason),void $("#reason").removeClass("visually-hidden");document.location.href="/"}else $("#password").focus();else $("#username").focus()}async function register(){$("#reason").text(""),$("#reason").addClass("visually-hidden");var e=$("#username").val(),a=$("#email").val(),n=$("#password").val();if(e.length)if(a.length)if(n.length){var s=await validate_register(e,a,n);if(200!=s.status)return $("#reason").text(s.reason),void $("#reason").removeClass("visually-hidden");document.location.href="/"}else $("#password").focus();else $("#email").focus();else $("#username").focus()}async function add_domain(){var e=$("#domain").val();if(e.length){var a=await validate_domain(e);if(200!=a.status)return $("#reason").text(a.reason),void $("#reason").removeClass("visually-hidden");document.location.href="/"}else $("#domain").focus()}function validate_login(e,a){return fetch(server+"/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})}).then((e=>e.json()))}function validate_register(e,a,n){return fetch(server+"/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e,email:a,password:n})}).then((e=>e.json()))}function validate_domain(e){return fetch(server+"/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({domain:e})}).then((e=>e.json()))}